"use strict";(self.webpackChunkaem_maven_archetype=self.webpackChunkaem_maven_archetype||[]).push([[749,181],{"./src/main/webpack/components/modal-leaving/modal-leaving.js":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{default:function(){return modal_leaving}});__webpack_require__("./node_modules/core-js/modules/es.array.map.js"),__webpack_require__("./node_modules/core-js/modules/es.object.keys.js"),__webpack_require__("./node_modules/core-js/modules/web.dom-collections.for-each.js"),__webpack_require__("./node_modules/core-js/modules/es.string.split.js"),__webpack_require__("./node_modules/core-js/modules/es.regexp.exec.js"),__webpack_require__("./node_modules/core-js/modules/es.array.includes.js"),__webpack_require__("./node_modules/core-js/modules/es.string.includes.js"),__webpack_require__("./node_modules/core-js/modules/es.string.match.js"),__webpack_require__("./node_modules/core-js/modules/es.object.to-string.js"),__webpack_require__("./node_modules/core-js/modules/es.error.cause.js");var focusableSelectors=['a[href]:not([tabindex^="-"])','area[href]:not([tabindex^="-"])','input:not([type="hidden"]):not([type="radio"]):not([disabled]):not([tabindex^="-"])','input[type="radio"]:not([disabled]):not([tabindex^="-"])','select:not([disabled]):not([tabindex^="-"])','textarea:not([disabled]):not([tabindex^="-"])','button:not([disabled]):not([tabindex^="-"])','iframe:not([tabindex^="-"])','audio[controls]:not([tabindex^="-"])','video[controls]:not([tabindex^="-"])','[contenteditable]:not([tabindex^="-"])','[tabindex]:not([tabindex^="-"])'];function A11yDialog(element){this._show=this.show.bind(this),this._hide=this.hide.bind(this),this._maintainFocus=this._maintainFocus.bind(this),this._bindKeypress=this._bindKeypress.bind(this),this.$el=element,this.shown=!1,this._id=this.$el.getAttribute("data-a11y-dialog")||this.$el.id,this._previouslyFocused=null,this._listeners={},this.create()}function $$(selector,context){return function toArray(collection){return Array.prototype.slice.call(collection)}((context||document).querySelectorAll(selector))}function moveFocusToDialog(node){(node.querySelector("[autofocus]")||node).focus()}function instantiateDialogs(){$$("[data-a11y-dialog]").forEach((function(node){new A11yDialog(node)}))}A11yDialog.prototype.create=function(){this.$el.setAttribute("aria-hidden",!0),this.$el.setAttribute("aria-modal",!0),this.$el.setAttribute("tabindex",-1),this.$el.hasAttribute("role")||this.$el.setAttribute("role","dialog"),this._openers=$$('[data-a11y-dialog-show="'+this._id+'"]'),this._openers.forEach(function(opener){opener.addEventListener("click",this._show)}.bind(this));const $el=this.$el;return this._closers=$$("[data-a11y-dialog-hide]",this.$el).filter((function(closer){return closer.closest('[aria-modal="true"], [data-a11y-dialog]')===$el})).concat($$('[data-a11y-dialog-hide="'+this._id+'"]')),this._closers.forEach(function(closer){closer.addEventListener("click",this._hide)}.bind(this)),this._fire("create"),this},A11yDialog.prototype.show=function(event){return this.shown||(this._previouslyFocused=document.activeElement,this.$el.removeAttribute("aria-hidden"),this.shown=!0,moveFocusToDialog(this.$el),document.body.addEventListener("focus",this._maintainFocus,!0),document.addEventListener("keydown",this._bindKeypress),this._fire("show",event)),this},A11yDialog.prototype.hide=function(event){return this.shown?(this.shown=!1,this.$el.setAttribute("aria-hidden","true"),this._previouslyFocused&&this._previouslyFocused.focus&&this._previouslyFocused.focus(),document.body.removeEventListener("focus",this._maintainFocus,!0),document.removeEventListener("keydown",this._bindKeypress),this._fire("hide",event),this):this},A11yDialog.prototype.destroy=function(){return this.hide(),this._openers.forEach(function(opener){opener.removeEventListener("click",this._show)}.bind(this)),this._closers.forEach(function(closer){closer.removeEventListener("click",this._hide)}.bind(this)),this._fire("destroy"),this._listeners={},this},A11yDialog.prototype.on=function(type,handler){return void 0===this._listeners[type]&&(this._listeners[type]=[]),this._listeners[type].push(handler),this},A11yDialog.prototype.off=function(type,handler){var index=(this._listeners[type]||[]).indexOf(handler);return index>-1&&this._listeners[type].splice(index,1),this},A11yDialog.prototype._fire=function(type,event){var listeners=this._listeners[type]||[],domEvent=new CustomEvent(type,{detail:event});this.$el.dispatchEvent(domEvent),listeners.forEach(function(listener){listener(this.$el,event)}.bind(this))},A11yDialog.prototype._bindKeypress=function(event){const focused=document.activeElement;focused&&focused.closest('[aria-modal="true"]')!==this.$el||(this.shown&&"Escape"===event.key&&"alertdialog"!==this.$el.getAttribute("role")&&(event.preventDefault(),this.hide(event)),this.shown&&"Tab"===event.key&&function trapTabKey(node,event){var focusableChildren=function getFocusableChildren(node){return $$(focusableSelectors.join(","),node).filter((function(child){return!!(child.offsetWidth||child.offsetHeight||child.getClientRects().length)}))}(node),focusedItemIndex=focusableChildren.indexOf(document.activeElement);event.shiftKey&&0===focusedItemIndex?(focusableChildren[focusableChildren.length-1].focus(),event.preventDefault()):event.shiftKey||focusedItemIndex!==focusableChildren.length-1||(focusableChildren[0].focus(),event.preventDefault())}(this.$el,event))},A11yDialog.prototype._maintainFocus=function(event){!this.shown||event.target.closest('[aria-modal="true"]')||event.target.closest("[data-a11y-dialog-ignore-focus-trap]")||moveFocusToDialog(this.$el)},"undefined"!=typeof document&&("loading"===document.readyState?document.addEventListener("DOMContentLoaded",instantiateDialogs):window.requestAnimationFrame?window.requestAnimationFrame(instantiateDialogs):window.setTimeout(instantiateDialogs,16));var helper=__webpack_require__("./src/main/webpack/site/js/helper.js");function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}var modal_leaving=function(){function ModalLeaving(el){!function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,ModalLeaving);var dialogEl=document.getElementById("my-dialog");this.dialog=new A11yDialog(dialogEl),this.el=el,this.intializeModal(el)}return function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),Constructor}(ModalLeaving,[{key:"intializeModal",value:function intializeModal(el){var _this=this;console.log(el);var currentExtUrl,exclusionLinksList=JSON.parse(el.getAttribute("modal-list")),exlusionExtlinks=Object.keys(exclusionLinksList).map((function(m){return exclusionLinksList[m]})),modalEle=document.querySelector(".cmp-modal--leaving");document.querySelectorAll("a").forEach((function(extlink){var linkhn=extlink.hostname.split(".").reverse(),linkHref=linkhn[1]+"."+linkhn[0],domainhn=window.location.hostname.split(".").reverse(),domainHref=domainhn[1]+"."+domainhn[0],getLinkHref=extlink.getAttribute("href"),checkExlcusionLink=exlusionExtlinks.includes(getLinkHref);linkHref===domainHref||checkExlcusionLink||getLinkHref.match(/^tel\:/)||getLinkHref.match(/^mailto\:/)||extlink.addEventListener("click",(function(e){e.preventDefault(),currentExtUrl=e.target.href,_this.dialog.show(),document.querySelector(".cmp-modal__button-secondary").focus(),(0,helper.trapFocus)(modalEle)}))})),document.querySelector(".cmp-modal__button-primary").addEventListener("click",(function(ev){window.open(currentExtUrl),_this.dialog.hide()})),document.querySelector(".cmp-modal__button-secondary").addEventListener("click",(function(ev){_this.dialog.hide()}))}}],[{key:"init",value:function init(el){return new ModalLeaving(el)}}]),ModalLeaving}()},"./src/main/webpack/site/js/helper.js":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{camelToDashed:function(){return camelToDashed},debounce:function(){return debounce},formToJSON:function(){return formToJSON},setInnerHtml:function(){return setInnerHtml},throttle:function(){return throttle},trapFocus:function(){return trapFocus}});__webpack_require__("./node_modules/core-js/modules/es.function.name.js"),__webpack_require__("./node_modules/core-js/modules/es.string.replace.js"),__webpack_require__("./node_modules/core-js/modules/es.regexp.exec.js"),__webpack_require__("./node_modules/core-js/modules/es.object.to-string.js");var formToJSON=function formToJSON(elements){return[].reduce.call(elements,(function(data,element){return"submit"!=element.type&&(data[element.name]=element.value),data}),{})},camelToDashed=function camelToDashed(str){return str.replace(/[A-Z]/g,(function(m){return"-"+m.toLowerCase()}))},throttle=function throttle(callback,limit){var wait=!1;return function(){wait||(callback.call(),wait=!0,setTimeout((function(){wait=!1}),limit))}},debounce=function debounce(func,wait){var timeout;return function executedFunction(){for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];var later=function later(){clearTimeout(timeout),func.apply(void 0,args)};clearTimeout(timeout),timeout=setTimeout(later,wait)}},setInnerHtml=function setInnerHtml(htmlStr){return{__html:htmlStr}},trapFocus=function trapFocus(element){var focusableEls=element.querySelectorAll('a[href]:not([disabled]), button:not([disabled]), textarea:not([disabled]), input[type="text"]:not([disabled]), input[type="radio"]:not([disabled]), input[type="checkbox"]:not([disabled]), select:not([disabled])'),firstFocusableEl=focusableEls[0],lastFocusableEl=focusableEls[focusableEls.length-1];element.addEventListener("keydown",(function(e){("Tab"===e.key||9===e.keyCode)&&(e.shiftKey?document.activeElement===firstFocusableEl&&(lastFocusableEl.focus(),e.preventDefault()):document.activeElement===lastFocusableEl&&(firstFocusableEl.focus(),e.preventDefault()))}))}}}]);